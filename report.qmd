---
title: "Wild Wonders"
author: "Team- Dragon, Members- Jay and Justin"
format: html
---

## Introduction

Genus Euoplos Rainbow is a genus of armored trapdoor spiders that is endemic to Australia. It was first described by William Joseph Rainbow in 1914. There are currently 14 recognized species in the genus Euoplos.

Euoplos spiders are typically small to medium in size, with body lengths ranging from 10 to 25 mm. They are characterized by their heavily armored carapaces (head plates) and opisthosomae (abdomens). The carapaces of Euoplos spiders are typically dark in color, while the opisthosomae can be brightly colored or patterned.

Euoplos spiders are nocturnal predators, and they spend most of their time in their burrows. Their burrows are typically constructed in sandy or loamy soil, and they have a hinged lid that the spider can close to protect itself from predators. Euoplos spiders prey on a variety of insects and other invertebrates, which they capture using their powerful fangs.

Euoplos spiders are found in a variety of habitats throughout Australia, including forests, woodlands, grasslands, and deserts. They are particularly common in dry, open habitats.

Some species of Euoplos spiders are thought to be threatened by habitat loss and degradation, as well as competition from introduced spider species. However, more research is needed to determine the conservation status of most Euoplos species.

- Habitat: Genus Euoplos Rainbow is found in dry, open habitats, such as forests and woodlands in Australia.

- Usual active time: Euoplos spiders are no
cturnal, meaning they are most active at night.

- Population trend: The population trend of Euoplos spiders is unknown. However, some species are thought to be threatened by habitat loss and degradation, as well as competition from introduced spider species.

- Tourist appeal: Euoplos spiders are not a major tourist attraction. However, there are a few places where tourists can see them in the wild, such as the Australian Capital Territory's Tidbinbilla Nature Reserve and the New South Wales' Royal National Park.

- Expectation:

<p style="padding-left: 50px;">We expect to see the occurrences only in the summer months, as Euoplos spiders are a warm-weather species.</p>
<p style="padding-left: 50px;">We expect to find the most occurrences in dry, open habitats.</p>
<p style="padding-left: 50px;">We expect to observe declining numbers since 1994, as this is the trend for many spider species in Australia.</p>
<p style="padding-left: 50px;">We expect to find that Euoplos spiders are more common in protected areas, such as national parks.</p>
<p style="padding-left: 50px;">We expect to find that Euoplos spiders are more likely to be found in areas with good habitat quality.</p>

<br>These are just a few expectations, and the actual data may reveal different patterns. It is important to note that the data on Euoplos spiders is limited, so it is difficult to make definitive conclusions about their distribution, population trend, and other aspects of their biology.




## Data description

<!--
2. Download all the occurrence records from the Atlas of Living Australia, ideally scripted using the `atlas_occurrences()` function from the `galah` package. Make sure you include date, time, collector identification details. Save this into a `data-raw` folder in your repo.
-->

```{r}
library(tidyverse)
library(galah)
library(lubridate)
```


```{r}

galah_config(email = "jaysangani04@gmail.com")
Euoplos_Rainbow <- galah_call() |>
  galah_identify("Euoplos Rainbow") |>
  atlas_occurrences()

# Filter records based on date (reliable sightings after 1990)
Euoplos_Rainbow <- Euoplos_Rainbow %>%
  filter(eventDate >= as.Date("1990-01-01"))

# Filter out unreliable sightings (BASIS_OF_RECORD_INVALID)
Euoplos_Rainbow_assert <- galah_call() |>
  galah_identify("Euoplos Rainbow") |>
  galah_select(group = "assertions") |>
  atlas_occurrences() %>%
  filter(BASIS_OF_RECORD_INVALID != "TRUE")

Euoplos_Rainbow_event <- galah_call() |>
  galah_identify("Euoplos Rainbow") |>
  galah_select(group = "event") |>
  atlas_occurrences()

```

```{r}
# Convert eventDate to Date format without the time component
Euoplos_Rainbow$eventDate <- as.Date(Euoplos_Rainbow$eventDate)
Euoplos_Rainbow_event$eventDate <- as.Date(Euoplos_Rainbow_event$eventDate)

```

```{r}
# Convert timezone-specific times to plain hour:minute:second format
timezone_format <- grepl("\\+[0-9]{2}:[0-9]{2}|Z", Euoplos_Rainbow_event$eventTime)
Euoplos_Rainbow_event$eventTime[timezone_format] <- substr(Euoplos_Rainbow_event$eventTime[timezone_format], 1, 8)

# For plain hour:minute, append ":00" to make it hour:minute:second
plain_time_format <- grepl("^[0-9]{2}:[0-9]{2}$", Euoplos_Rainbow_event$eventTime)
Euoplos_Rainbow_event$eventTime[plain_time_format] <- paste0(Euoplos_Rainbow_event$eventTime[plain_time_format], ":00")
```


```{r}
# Merging based on eventDate
Euoplos_Rainbow_2 <- merge(Euoplos_Rainbow, Euoplos_Rainbow_event, by="eventDate", all=TRUE)

# Merging the result with Euoplos_Rainbow_assert based on recordID
Euoplos_Rainbow_3 <- merge(Euoplos_Rainbow_2, Euoplos_Rainbow_assert, by="recordID", all=TRUE)

#all=TRUE argument ensures a full outer join, keeping all rows from both data frames in the result, even if there's no matching recordID.


# Convert 12-hour format to 24-hour format
twelve_hour_format <- grepl("[APM]{2}", Euoplos_Rainbow_event$eventTime, ignore.case=TRUE)
Euoplos_Rainbow_event$eventTime[twelve_hour_format] <- format(strptime(Euoplos_Rainbow_event$eventTime[twelve_hour_format], format="%I:%M %p"), "%H:%M:%S")

#converting time from AM/PM to HH:MM:SS
convert_time <- function(time) {
  if(grepl("AM|PM", time, ignore.case = TRUE)) {
    return(format(parse_date_time(time, "h:M%p"), "%H:%M:%S"))
  }
  return(time)
}

Euoplos_Rainbow_3$eventTime <- sapply(Euoplos_Rainbow_3$eventTime, convert_time)

#selecting neccesory variables
Euoplos_Rainbow_3 <- Euoplos_Rainbow_3 %>% 
  select(decimalLatitude, decimalLongitude, eventDate,scientificName, taxonConceptID, recordID, dataResourceName, occurrenceStatus, BASIS_OF_RECORD_INVALID, eventID, eventTime, samplingProtocol)

#removing duplicates from the dataset
Euoplos_Rainbow_combined <- Euoplos_Rainbow_3 %>% 
  distinct()



Euoplos_Rainbow_combined$eventTime <- hms::as_hms(Euoplos_Rainbow_combined$eventTime)


# Save data as an R object in the "data-raw" folder
save(spider, file = "data-raw/spider.rda")

```



## Initial data analysis

<!--
3. Perform a data quality check, and then go ahead and clean the data, saving only the wild sightings. Save the resulting data in a `data` folder as an `WILD_THING_COMMON_NAME.rda` file, so that any special variable types are clearly available. (Replace `WILD_THING_COMMON_NAME` with lower case common name of your assigned wild thing.) *Note:* Some are museum or historical records or live in an animal sanctuary or zoo, which do not truly capture their wild behaviour. Downloading the event information (`galah_select(group = "event")`) can help identify wild sightings.

Weather data pre-processing here too.
-->

## Exploratory data analysis

<!--
4. Make plots of the data to check each of your expectations, and report what you learn. *Note:* This might also be a place where visual inference methods *may* be useful to determine if what is seen agrees or disputes what you expected. 

Weather data exploration here too.
-->

## Summary 

## References

Proper sitation is not done yet fot the 

Australian Faunal Directory: https://biodiversity.org.au/afd/taxa/Euoplos
Atlas of Living Australia: https://bie.ala.org.au/species/https://biodiversity.org.au/afd/taxa/1b5cd7fc-fed7-4788-ac39-b33cafc7bbb4
Australian Spiders in Colour: https://www.termite.com.au/spider-identification.html
A Photographic Guide to Australian Spiders: http://www.findaspider.org.au/find/spiders/409.htm
